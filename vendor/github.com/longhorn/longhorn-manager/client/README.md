# Longhorn API Client

The code in this package are generated by [rancher/go-rancher](https://github.com/rancher/go-rancher).
But in order to fix some compatibility issues, you need to use this [repo](https://github.com/niusmallnan/go-rancher), and you should checkout the `longhorn-v1` branch.

## Generate code in go-rancher

If you have a longhorn api URL, you can use this script:

```
./scripts/generate-longhorn-schemas.sh http://manager-api-ip:port
```

## Copy code to longhorn-manager

Just use cp to copy these code is fine, but you should update package name in `longhorn-manager`:

```
cd longhorn-manager/client
sed -i -e 's/package longhorn/package client/g' *.go
```

## Notes:

The generator currently no longer generates actions, so you need to ensure not to overwrite the `ActionUpdateAccessMode`
in `generated_volume.go`. I currently don't have the time to look into this and since we are planning on reworking the api
down the line, this is a low priority issue for now.
